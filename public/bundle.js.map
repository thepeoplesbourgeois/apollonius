{"version":3,"file":"bundle.js","sources":["../node_modules/.registry.npmjs.org/@ungap/custom-event/0.2.0/node_modules/@ungap/custom-event/esm/index.js","../node_modules/.registry.npmjs.org/@ungap/weakset/0.1.5/node_modules/@ungap/weakset/esm/index.js","../node_modules/.registry.npmjs.org/augmentor/0.2.6/node_modules/augmentor/esm/core.js","../node_modules/.registry.npmjs.org/augmentor/0.2.6/node_modules/augmentor/esm/use/effect.js","../node_modules/.registry.npmjs.org/augmentor/0.2.6/node_modules/augmentor/esm/use/ref.js","../node_modules/.registry.npmjs.org/augmentor/0.2.6/node_modules/augmentor/esm/use/memo.js","../node_modules/.registry.npmjs.org/augmentor/0.2.6/node_modules/augmentor/esm/use/reducer.js","../node_modules/.registry.npmjs.org/augmentor/0.2.6/node_modules/augmentor/esm/use/state.js","../node_modules/.registry.npmjs.org/augmentor/0.2.6/node_modules/augmentor/esm/use/context.js","../node_modules/.registry.npmjs.org/dom-augmentor/0.2.8/node_modules/dom-augmentor/esm/index.js","../node_modules/.registry.npmjs.org/disconnected/0.1.6/node_modules/disconnected/esm/index.js","../node_modules/.registry.npmjs.org/@ungap/weakmap/0.1.4/node_modules/@ungap/weakmap/esm/index.js","../node_modules/.registry.npmjs.org/@ungap/template-literal/0.1.3/node_modules/@ungap/template-literal/esm/index.js","../node_modules/.registry.npmjs.org/@ungap/template-tag-arguments/0.1.1/node_modules/@ungap/template-tag-arguments/esm/index.js","../node_modules/.registry.npmjs.org/hyperhtml-wire/2.1.0/node_modules/hyperhtml-wire/esm/index.js","../node_modules/.registry.npmjs.org/lighterhtml/0.9.2/node_modules/lighterhtml/esm/shared.js","../node_modules/.registry.npmjs.org/@ungap/create-content/0.1.4/node_modules/@ungap/create-content/esm/index.js","../node_modules/.registry.npmjs.org/@ungap/essential-map/0.1.7/node_modules/@ungap/essential-map/esm/index.js","../node_modules/.registry.npmjs.org/domdiff/2.0.3/node_modules/domdiff/esm/utils.js","../node_modules/.registry.npmjs.org/domdiff/2.0.3/node_modules/domdiff/esm/index.js","../node_modules/.registry.npmjs.org/@ungap/import-node/0.1.0/node_modules/@ungap/import-node/esm/index.js","../node_modules/.registry.npmjs.org/domtagger/0.2.3/node_modules/domtagger/esm/constants.js","../node_modules/.registry.npmjs.org/@ungap/trim/0.1.1/node_modules/@ungap/trim/esm/index.js","../node_modules/.registry.npmjs.org/domtagger/0.2.3/node_modules/domtagger/esm/sanitizer.js","../node_modules/.registry.npmjs.org/domtagger/0.2.3/node_modules/domtagger/esm/walker.js","../node_modules/.registry.npmjs.org/domtagger/0.2.3/node_modules/domtagger/esm/index.js","../node_modules/.registry.npmjs.org/hyperhtml-style/0.1.2/node_modules/hyperhtml-style/esm/index.js","../node_modules/.registry.npmjs.org/lighterhtml/0.9.2/node_modules/lighterhtml/esm/tagger.js","../node_modules/.registry.npmjs.org/lighterhtml/0.9.2/node_modules/lighterhtml/esm/index.js","../node_modules/.registry.npmjs.org/neverland/1.2.4/node_modules/neverland/esm/index.js","../src/js/main.js"],"sourcesContent":["/*! (c) Andrea Giammarchi - ISC */\nvar self = this || /* istanbul ignore next */ {};\nself.CustomEvent = typeof CustomEvent === 'function' ?\n  CustomEvent :\n  (function (__p__) {\n    CustomEvent[__p__] = new CustomEvent('').constructor[__p__];\n    return CustomEvent;\n    function CustomEvent(type, init) {\n      if (!init) init = {};\n      var e = document.createEvent('CustomEvent');\n      e.initCustomEvent(type, !!init.bubbles, !!init.cancelable, init.detail);\n      return e;\n    }\n  }('prototype'));\nexport default self.CustomEvent;\n","/*! (c) Andrea Giammarchi - ISC */\nvar self = this || /* istanbul ignore next */ {};\ntry { self.WeakSet = WeakSet; }\ncatch (WeakSet) {\n  // requires a global WeakMap (IE11+)\n  (function (WeakMap) {\n    var all = new WeakMap;\n    var proto = WeakSet.prototype;\n    proto.add = function (value) {\n      return all.get(this).set(value, 1), this;\n    };\n    proto.delete = function (value) {\n      return all.get(this).delete(value);\n    };\n    proto.has = function (value) {\n      return all.get(this).has(value);\n    };\n    self.WeakSet = WeakSet;\n    function WeakSet(iterable) {\n      'use strict';\n      all.set(this, new WeakMap);\n      if (iterable)\n        iterable.forEach(this.add, this);\n    }\n  }(WeakMap));\n}\nexport default self.WeakSet;\n","let now = null;\nexport const current = () => now;\n\nexport const empty = [];\nexport const setup = [];\n\nexport const $ = (value, args) =>\n  typeof value === typeof $ ? value.apply(null, args) : value;\n\nexport const diff = (a, b) => (a.length !== b.length || a.some(diverse, b));\n\nexport const stacked = id => runner => {\n  const state = {i: 0, stack: []};\n  runner[id] = state;\n  runner.before.push(() => {\n    state.i = 0;\n  });\n};\n\nlet id = 0;\nexport const uid = () => '_$' + id++;\n\nexport const unstacked = id => {\n  const {[id]: state, update} = now;\n  const {i, stack} = state;\n  state.i++;\n  return {i, stack, update, unknown: i === stack.length};\n};\n\nexport default fn => {\n  const current = runner($);\n  each(setup, current);\n  $.reset = () => {\n    each(current.reset, current);\n    for (const key in current) {\n      if (/^_\\$/.test(key))\n        current[key].stack.splice(0);\n    }\n  };\n  return $;\n  function $() {\n    const prev = now;\n    now = current;\n    const {_, before, after, external} = current;\n    try {\n      let result;\n      do {\n        _.$ = _._ = false;\n        each(before, current);\n        result = fn.apply(_.c = this, _.a = arguments);\n        each(after, current);\n        if (external.length)\n          each(external.splice(0), result);\n      } while (_._);\n      return result;\n    }\n    finally {\n      _.$ = true;\n      now = prev;\n    }\n  }\n};\n\nconst each = (arr, value) => {\n  const {length} = arr;\n  let i = 0;\n  while (i < length)\n    arr[i++](value);\n};\n\nconst runner = $ => {\n  const _ = {\n    _: true,\n    $: true,\n    c: null,\n    a: null\n  };\n  return {\n    _: _,\n    before: [],\n    after: [],\n    external: [],\n    reset: [],\n    update: () => _.$ ? $.apply(_.c, _.a) : (_._ = true)\n  };\n};\n\nfunction diverse(value, i) {\n  return value !== this[i];\n}\n","import {current, diff, empty, setup, unstacked, uid} from '../core.js';\n\nconst id = uid();\n\nlet cancel, request;\n\ntry {\n  cancel = cancelAnimationFrame;\n  request = requestAnimationFrame;\n} catch (o_O) {\n  cancel = clearTimeout;\n  request = setTimeout;\n}\n\nconst create = (always, check, inputs, raf, cb, stack, i) => {\n  const info = {\n    always,\n    cb,\n    check,\n    clean: null,\n    inputs,\n    raf,\n    t: 0,\n    update: check,\n    fn: () => {\n      set(stack[i], info.cb());\n    }\n  };\n  return info;\n};\n\nconst effect = raf => (cb, refs) => {\n  const {i, stack, unknown} = unstacked(id);\n  const comp = refs || empty;\n  if (unknown) {\n    const always = comp === empty;\n    const check = always || !raf || typeof comp !== typeof effect;\n    if (always || !raf || typeof comp !== typeof effect) {\n      stack.push(create(always, check, comp, raf, cb, stack, i));\n    } else {\n      current().external.push(result => refs(cb, result));\n      stack.push(create(always, always, empty, raf, effect, stack, i));\n    }\n  } else {\n    const info = stack[i];\n    const {check, always, inputs} = info;\n    if (check && (always || diff(inputs, comp))) {\n      info.cb = cb;\n      info.inputs = comp;\n      info.update = true;\n    }\n  }\n};\n\nconst set = (info, clean) => {\n  info.t = 0;\n  info.clean = clean;\n};\n\nsetup.push(runner => {\n  const stack = [];\n  const state = {i: 0, stack};\n  const drop = (current, clean, raf, t) => {\n    if (raf && t)\n      cancel(t);\n    else if (clean)\n      clean();\n    set(current, null);\n  };\n  runner[id] = state;\n  runner.before.push(() => {\n    state.i = 0;\n  });\n  runner.reset.push(() => {\n    state.i = 0;\n    for (let {length} = stack, i = 0; i < length; i++) {\n      const current = stack[i];\n      const {check, clean, raf, t} = current;\n      if (check)\n        drop(current, clean, raf, t);\n    }\n  });\n  runner.after.push(() => {\n    for (let {length} = stack, i = 0; i < length; i++) {\n      const current = stack[i];\n      const {check, clean, fn, raf, t, update} = current;\n      if (check && update) {\n        current.update = false;\n        drop(current, clean, raf, t);\n        if (raf)\n          current.t = request(fn);\n        else\n          fn();\n      }\n    }\n  });\n});\n\nexport const useEffect = effect(true);\nexport const useLayoutEffect = effect(false);\n","import {$, empty, setup, stacked, unstacked, uid} from '../core.js';\n\nconst id = uid();\n\nsetup.push(stacked(id));\n\nexport default value => {\n  const {i, stack, unknown} = unstacked(id);\n  if (unknown) {\n    const info = {current: null};\n    stack.push(info);\n    info.current = $(value, empty);\n  }\n  return stack[i];\n};\n","import {diff, empty, setup, stacked, unstacked, uid} from '../core.js';\n\nconst id = uid();\n\nsetup.push(stacked(id));\n\nexport default (callback, refs) => {\n  const {i, stack, unknown} = unstacked(id);\n  const comp = refs || empty;\n  if (unknown)\n    create(stack, -1, callback, comp);\n  const {filter, value, fn, inputs} = stack[i];\n  return (filter ? diff(inputs, comp) : (callback !== fn)) ?\n          create(stack, i, callback, comp) :\n          value;\n};\n\nconst create = (stack, i, fn, inputs) => {\n  const info = {\n    filter: inputs !== empty,\n    value: null,\n    fn,\n    inputs\n  };\n  if (i < 0)\n    stack.push(info);\n  else\n    stack[i] = info;\n  info.value = fn();\n  return info.value;\n};\n","import {$, empty, setup, stacked, unstacked, uid} from '../core.js';\n\nconst id = uid();\n\nsetup.push(stacked(id));\n\nexport default (reducer, value) => {\n  const {i, stack, unknown, update} = unstacked(id);\n  if (unknown) {\n    const info = [null, action => {\n      value = reducer(value, action);\n      info[0] = value;\n      update();\n    }];\n    stack.push(info);\n    info[0] = $(value, empty);\n  }\n  return stack[i];\n};\n","import {$} from '../core.js';\nimport useReducer from './reducer.js';\n\nexport default value => useReducer(\n  (_, value) => $(value, [_]),\n  value\n);\n","import {setup, stacked, unstacked, uid} from '../core.js';\n\nconst all = new WeakMap;\nconst id = uid();\n\nsetup.push(stacked(id));\n\nexport const createContext = value => {\n  const context = {\n    value,\n    provide\n  };\n  all.set(context, []);\n  return context;\n};\n\nexport const useContext = context => {\n  const {i, stack, unknown, update} = unstacked(id);\n  if (unknown) {\n    all.get(context).push(update);\n    stack.push(context);\n  }\n  return stack[i].value;\n};\n\nfunction provide(value) {\n  if (this.value !== value) {\n    this.value = value;\n    for (let arr = all.get(this), {length} = arr, i = 0; i < length; i++)\n      arr[i]();\n  }\n}\n","import CustomEvent from '@ungap/custom-event';\nimport WeakSet from '@ungap/weakset';\n\nimport augmentor, {\n  createContext,\n  useCallback,\n  useContext,\n  useEffect as effect,\n  useLayoutEffect,\n  useMemo,\n  useReducer,\n  useRef,\n  useState\n} from 'augmentor';\n\nimport disconnected from 'disconnected';\n\nconst find = node => {\n  const {childNodes} = node;\n  const {length} = childNodes;\n  let i = 0;\n  while (i < length) {\n    const child = childNodes[i++];\n    if (child.nodeType === 1)\n      return child;\n  }\n  throw 'unobservable';\n};\n\nconst observe = disconnected({Event: CustomEvent, WeakSet});\n\nconst observer = ($, element) => {\n  const {nodeType} = element;\n  if (nodeType) {\n    const node = nodeType === 1 ? element : find(element);\n    observe(node);\n    const handler = {handleEvent, onconnected, ondisconnected, $, _: null};\n    node.addEventListener('connected', handler, false);\n    node.addEventListener('disconnected', handler, false);\n  }\n  else {\n    const value = element.valueOf();\n    // give a chance to facades to return a reasonable value\n    if (value !== element)\n      observer($, value);\n  }\n};\n\nconst useEffect = (fn, inputs) => {\n  const args = [fn];\n  if (inputs)\n    // if the inputs is an empty array\n    // observe the returned element for connect/disconnect events\n    // and invoke effects/cleanup on these events only\n    args.push(inputs.length ? inputs : observer);\n  return effect.apply(null, args);\n};\n\nexport default augmentor;\n\nexport {\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useReducer,\n  useRef,\n  useState\n};\n\n// handlers methods\nfunction handleEvent(e) {\n  this['on' + e.type]();\n}\n\nfunction onconnected() {\n  ondisconnected.call(this);\n  this._ = this.$();\n}\n\nfunction ondisconnected() {\n  const {_} = this;\n  this._ = null;\n  if (_)\n    _();\n}\n","/*! (c) Andrea Giammarchi */\nfunction disconnected(poly) {'use strict';\n  var CONNECTED = 'connected';\n  var DISCONNECTED = 'dis' + CONNECTED;\n  var Event = poly.Event;\n  var WeakSet = poly.WeakSet;\n  var notObserving = true;\n  var observer = new WeakSet;\n  return function observe(node) {\n    if (notObserving) {\n      notObserving = !notObserving;\n      startObserving(node.ownerDocument);\n    }\n    observer.add(node);\n    return node;\n  };\n  function startObserving(document) {\n    var dispatched = null;\n    try {\n      (new MutationObserver(changes)).observe(\n        document,\n        {subtree: true, childList: true}\n      );\n    }\n    catch(o_O) {\n      var timer = 0;\n      var records = [];\n      var reschedule = function (record) {\n        records.push(record);\n        clearTimeout(timer);\n        timer = setTimeout(\n          function () {\n            changes(records.splice(timer = 0, records.length));\n          },\n          0\n        );\n      };\n      document.addEventListener(\n        'DOMNodeRemoved',\n        function (event) {\n          reschedule({addedNodes: [], removedNodes: [event.target]});\n        },\n        true\n      );\n      document.addEventListener(\n        'DOMNodeInserted',\n        function (event) {\n          reschedule({addedNodes: [event.target], removedNodes: []});\n        },\n        true\n      );\n    }\n    function changes(records) {\n      dispatched = new Tracker;\n      for (var\n        record,\n        length = records.length,\n        i = 0; i < length; i++\n      ) {\n        record = records[i];\n        dispatchAll(record.removedNodes, DISCONNECTED, CONNECTED);\n        dispatchAll(record.addedNodes, CONNECTED, DISCONNECTED);\n      }\n      dispatched = null;\n    }\n    function dispatchAll(nodes, type, counter) {\n      for (var\n        node,\n        event = new Event(type),\n        length = nodes.length,\n        i = 0; i < length;\n        (node = nodes[i++]).nodeType === 1 &&\n        dispatchTarget(node, event, type, counter)\n      );\n    }\n    function dispatchTarget(node, event, type, counter) {\n      if (observer.has(node) && !dispatched[type].has(node)) {\n        dispatched[counter].delete(node);\n        dispatched[type].add(node);\n        node.dispatchEvent(event);\n        /*\n        // The event is not bubbling (perf reason: should it?),\n        // hence there's no way to know if\n        // stop/Immediate/Propagation() was called.\n        // Should DOM Level 0 work at all?\n        // I say it's a YAGNI case for the time being,\n        // and easy to implement in user-land.\n        if (!event.cancelBubble) {\n          var fn = node['on' + type];\n          if (fn)\n            fn.call(node, event);\n        }\n        */\n      }\n      for (var\n        // apparently is node.children || IE11 ... ^_^;;\n        // https://github.com/WebReflection/disconnected/issues/1\n        children = node.children || [],\n        length = children.length,\n        i = 0; i < length;\n        dispatchTarget(children[i++], event, type, counter)\n      );\n    }\n    function Tracker() {\n      this[CONNECTED] = new WeakSet;\n      this[DISCONNECTED] = new WeakSet;\n    }\n  }\n}\nexport default disconnected;\n","/*! (c) Andrea Giammarchi - ISC */\nvar self = this || /* istanbul ignore next */ {};\ntry { self.WeakMap = WeakMap; }\ncatch (WeakMap) {\n  // this could be better but 90% of the time\n  // it's everything developers need as fallback\n  self.WeakMap = (function (id, Object) {'use strict';\n    var dP = Object.defineProperty;\n    var hOP = Object.hasOwnProperty;\n    var proto = WeakMap.prototype;\n    proto.delete = function (key) {\n      return this.has(key) && delete key[this._];\n    };\n    proto.get = function (key) {\n      return this.has(key) ? key[this._] : void 0;\n    };\n    proto.has = function (key) {\n      return hOP.call(key, this._);\n    };\n    proto.set = function (key, value) {\n      dP(key, this._, {configurable: true, value: value});\n      return this;\n    };\n    return WeakMap;\n    function WeakMap(iterable) {\n      dP(this, '_', {value: '_@ungap/weakmap' + id++});\n      if (iterable)\n        iterable.forEach(add, this);\n    }\n    function add(pair) {\n      this.set(pair[0], pair[1]);\n    }\n  }(Math.random(), Object));\n}\nexport default self.WeakMap;\n","/*! (c) Andrea Giammarchi - ISC */\nvar templateLiteral = (function () {'use strict';\n  var RAW = 'raw';\n  var isNoOp = typeof document !== 'object';\n  var templateLiteral = function (tl) {\n    if (\n      // for badly transpiled literals\n      !(RAW in tl) ||\n      // for some version of TypeScript\n      tl.propertyIsEnumerable(RAW) ||\n      // and some other version of TypeScript\n      !Object.isFrozen(tl[RAW]) ||\n      (\n        // or for Firefox < 55\n        /Firefox\\/(\\d+)/.test(\n          (document.defaultView.navigator || {}).userAgent\n        ) &&\n        parseFloat(RegExp.$1) < 55\n      )\n    ) {\n      var forever = {};\n      templateLiteral = function (tl) {\n        for (var key = '.', i = 0; i < tl.length; i++)\n          key += tl[i].length + '.' + tl[i];\n        return forever[key] || (forever[key] = tl);\n      };\n    } else {\n      isNoOp = true;\n    }\n    return TL(tl);\n  };\n  return TL;\n  function TL(tl) {\n    return isNoOp ? tl : templateLiteral(tl);\n  }\n}());\nexport default templateLiteral;\n","import unique from '@ungap/template-literal';\n\nexport default function (template) {\n  var length = arguments.length;\n  var args = [unique(template)];\n  var i = 1;\n  while (i < length)\n    args.push(arguments[i++]);\n  return args;\n};\n","/*! (c) Andrea Giammarchi - ISC */\nvar Wire = (function (slice, proto) {\n\n  proto = Wire.prototype;\n\n  proto.ELEMENT_NODE = 1;\n  proto.nodeType = 111;\n\n  proto.remove = function (keepFirst) {\n    var childNodes = this.childNodes;\n    var first = this.firstChild;\n    var last = this.lastChild;\n    this._ = null;\n    if (keepFirst && childNodes.length === 2) {\n      last.parentNode.removeChild(last);\n    } else {\n      var range = this.ownerDocument.createRange();\n      range.setStartBefore(keepFirst ? childNodes[1] : first);\n      range.setEndAfter(last);\n      range.deleteContents();\n    }\n    return first;\n  };\n\n  proto.valueOf = function (forceAppend) {\n    var fragment = this._;\n    var noFragment = fragment == null;\n    if (noFragment)\n      fragment = (this._ = this.ownerDocument.createDocumentFragment());\n    if (noFragment || forceAppend) {\n      for (var n = this.childNodes, i = 0, l = n.length; i < l; i++)\n        fragment.appendChild(n[i]);\n    }\n    return fragment;\n  };\n\n  return Wire;\n\n  function Wire(childNodes) {\n    var nodes = (this.childNodes = slice.call(childNodes, 0));\n    this.firstChild = nodes[0];\n    this.lastChild = nodes[nodes.length - 1];\n    this.ownerDocument = nodes[0].ownerDocument;\n    this._ = null;\n  }\n\n}([].slice));\nexport default Wire;\n","import Wire from 'hyperhtml-wire';\n\nconst {isArray} = Array;\nconst wireType = Wire.prototype.nodeType;\n\nexport {\n  Wire,\n  isArray,\n  wireType\n};\n","/*! (c) Andrea Giammarchi - ISC */\nvar createContent = (function (document) {'use strict';\n  var FRAGMENT = 'fragment';\n  var TEMPLATE = 'template';\n  var HAS_CONTENT = 'content' in create(TEMPLATE);\n\n  var createHTML = HAS_CONTENT ?\n    function (html) {\n      var template = create(TEMPLATE);\n      template.innerHTML = html;\n      return template.content;\n    } :\n    function (html) {\n      var content = create(FRAGMENT);\n      var template = create(TEMPLATE);\n      var childNodes = null;\n      if (/^[^\\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(html)) {\n        var selector = RegExp.$1;\n        template.innerHTML = '<table>' + html + '</table>';\n        childNodes = template.querySelectorAll(selector);\n      } else {\n        template.innerHTML = html;\n        childNodes = template.childNodes;\n      }\n      append(content, childNodes);\n      return content;\n    };\n\n  return function createContent(markup, type) {\n    return (type === 'svg' ? createSVG : createHTML)(markup);\n  };\n\n  function append(root, childNodes) {\n    var length = childNodes.length;\n    while (length--)\n      root.appendChild(childNodes[0]);\n  }\n\n  function create(element) {\n    return element === FRAGMENT ?\n      document.createDocumentFragment() :\n      document.createElementNS('http://www.w3.org/1999/xhtml', element);\n  }\n\n  // it could use createElementNS when hasNode is there\n  // but this fallback is equally fast and easier to maintain\n  // it is also battle tested already in all IE\n  function createSVG(svg) {\n    var content = create(FRAGMENT);\n    var template = create('div');\n    template.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\">' + svg + '</svg>';\n    append(content, template.firstChild.childNodes);\n    return content;\n  }\n\n}(document));\nexport default createContent;\n","/*! (c) Andrea Giammarchi - ISC */\nvar self = this || /* istanbul ignore next */ {};\ntry { self.Map = Map; }\ncatch (Map) {\n  self.Map = function Map() {\n    var i = 0;\n    var k = [];\n    var v = [];\n    return {\n      delete: function (key) {\n        var had = contains(key);\n        if (had) {\n          k.splice(i, 1);\n          v.splice(i, 1);\n        }\n        return had;\n      },\n      get: function get(key) {\n        return contains(key) ? v[i] : void 0;\n      },\n      has: function has(key) {\n        return contains(key);\n      },\n      set: function set(key, value) {\n        v[contains(key) ? i : (k.push(key) - 1)] = value;\n        return this;\n      }\n    };\n    function contains(v) {\n      i = k.indexOf(v);\n      return -1 < i;\n    }\n  };\n}\nexport default self.Map;\n","import Map from '@ungap/essential-map';\n\nexport const append = (get, parent, children, start, end, before) => {\n  if ((end - start) < 2)\n    parent.insertBefore(get(children[start], 1), before);\n  else {\n    const fragment = parent.ownerDocument.createDocumentFragment();\n    while (start < end)\n      fragment.appendChild(get(children[start++], 1));\n    parent.insertBefore(fragment, before);\n  }\n};\n\nexport const eqeq = (a, b) => a == b;\n\nexport const identity = O => O;\n\nexport const indexOf = (\n  moreNodes,\n  moreStart,\n  moreEnd,\n  lessNodes,\n  lessStart,\n  lessEnd,\n  compare\n) => {\n  const length = lessEnd - lessStart;\n  /* istanbul ignore if */\n  if (length < 1)\n    return -1;\n  while ((moreEnd - moreStart) >= length) {\n    let m = moreStart;\n    let l = lessStart;\n    while (\n      m < moreEnd &&\n      l < lessEnd &&\n      compare(moreNodes[m], lessNodes[l])\n    ) {\n      m++;\n      l++;\n    }\n    if (l === lessEnd)\n      return moreStart;\n    moreStart = m + 1;\n  }\n  return -1;\n};\n\nexport const isReversed = (\n  futureNodes,\n  futureEnd,\n  currentNodes,\n  currentStart,\n  currentEnd,\n  compare\n) => {\n  while (\n    currentStart < currentEnd &&\n    compare(\n      currentNodes[currentStart],\n      futureNodes[futureEnd - 1]\n    )) {\n      currentStart++;\n      futureEnd--;\n    };\n  return futureEnd === 0;\n};\n\nexport const next = (get, list, i, length, before) => i < length ?\n              get(list[i], 0) :\n              (0 < i ?\n                get(list[i - 1], -0).nextSibling :\n                before);\n\nexport const remove = (get, parent, children, start, end) => {\n  if ((end - start) < 2)\n    parent.removeChild(get(children[start], -1));\n  else {\n    const range = parent.ownerDocument.createRange();\n    range.setStartBefore(get(children[start], -1));\n    range.setEndAfter(get(children[end - 1], -1));\n    range.deleteContents();\n  }\n};\n\n// - - - - - - - - - - - - - - - - - - -\n// diff related constants and utilities\n// - - - - - - - - - - - - - - - - - - -\n\nconst DELETION = -1;\nconst INSERTION = 1;\nconst SKIP = 0;\nconst SKIP_OND = 50;\n\nconst HS = (\n  futureNodes,\n  futureStart,\n  futureEnd,\n  futureChanges,\n  currentNodes,\n  currentStart,\n  currentEnd,\n  currentChanges\n) => {\n\n  let k = 0;\n  /* istanbul ignore next */\n  let minLen = futureChanges < currentChanges ? futureChanges : currentChanges;\n  const link = Array(minLen++);\n  const tresh = Array(minLen);\n  tresh[0] = -1;\n\n  for (let i = 1; i < minLen; i++)\n    tresh[i] = currentEnd;\n\n  const keymap = new Map;\n  for (let i = currentStart; i < currentEnd; i++)\n    keymap.set(currentNodes[i], i);\n\n  for (let i = futureStart; i < futureEnd; i++) {\n    const idxInOld = keymap.get(futureNodes[i]);\n    if (idxInOld != null) {\n      k = findK(tresh, minLen, idxInOld);\n      /* istanbul ignore else */\n      if (-1 < k) {\n        tresh[k] = idxInOld;\n        link[k] = {\n          newi: i,\n          oldi: idxInOld,\n          prev: link[k - 1]\n        };\n      }\n    }\n  }\n\n  k = --minLen;\n  --currentEnd;\n  while (tresh[k] > currentEnd) --k;\n\n  minLen = currentChanges + futureChanges - k;\n  const diff = Array(minLen);\n  let ptr = link[k];\n  --futureEnd;\n  while (ptr) {\n    const {newi, oldi} = ptr;\n    while (futureEnd > newi) {\n      diff[--minLen] = INSERTION;\n      --futureEnd;\n    }\n    while (currentEnd > oldi) {\n      diff[--minLen] = DELETION;\n      --currentEnd;\n    }\n    diff[--minLen] = SKIP;\n    --futureEnd;\n    --currentEnd;\n    ptr = ptr.prev;\n  }\n  while (futureEnd >= futureStart) {\n    diff[--minLen] = INSERTION;\n    --futureEnd;\n  }\n  while (currentEnd >= currentStart) {\n    diff[--minLen] = DELETION;\n    --currentEnd;\n  }\n  return diff;\n};\n\n// this is pretty much the same petit-dom code without the delete map part\n// https://github.com/yelouafi/petit-dom/blob/bd6f5c919b5ae5297be01612c524c40be45f14a7/src/vdom.js#L556-L561\nconst OND = (\n  futureNodes,\n  futureStart,\n  rows,\n  currentNodes,\n  currentStart,\n  cols,\n  compare\n) => {\n  const length = rows + cols;\n  const v = [];\n  let d, k, r, c, pv, cv, pd;\n  outer: for (d = 0; d <= length; d++) {\n    /* istanbul ignore if */\n    if (d > SKIP_OND)\n      return null;\n    pd = d - 1;\n    /* istanbul ignore next */\n    pv = d ? v[d - 1] : [0, 0];\n    cv = v[d] = [];\n    for (k = -d; k <= d; k += 2) {\n      if (k === -d || (k !== d && pv[pd + k - 1] < pv[pd + k + 1])) {\n        c = pv[pd + k + 1];\n      } else {\n        c = pv[pd + k - 1] + 1;\n      }\n      r = c - k;\n      while (\n        c < cols &&\n        r < rows &&\n        compare(\n          currentNodes[currentStart + c],\n          futureNodes[futureStart + r]\n        )\n      ) {\n        c++;\n        r++;\n      }\n      if (c === cols && r === rows) {\n        break outer;\n      }\n      cv[d + k] = c;\n    }\n  }\n\n  const diff = Array(d / 2 + length / 2);\n  let diffIdx = diff.length - 1;\n  for (d = v.length - 1; d >= 0; d--) {\n    while (\n      c > 0 &&\n      r > 0 &&\n      compare(\n        currentNodes[currentStart + c - 1],\n        futureNodes[futureStart + r - 1]\n      )\n    ) {\n      // diagonal edge = equality\n      diff[diffIdx--] = SKIP;\n      c--;\n      r--;\n    }\n    if (!d)\n      break;\n    pd = d - 1;\n    /* istanbul ignore next */\n    pv = d ? v[d - 1] : [0, 0];\n    k = c - r;\n    if (k === -d || (k !== d && pv[pd + k - 1] < pv[pd + k + 1])) {\n      // vertical edge = insertion\n      r--;\n      diff[diffIdx--] = INSERTION;\n    } else {\n      // horizontal edge = deletion\n      c--;\n      diff[diffIdx--] = DELETION;\n    }\n  }\n  return diff;\n};\n\nconst applyDiff = (\n  diff,\n  get,\n  parentNode,\n  futureNodes,\n  futureStart,\n  currentNodes,\n  currentStart,\n  currentLength,\n  before\n) => {\n  const live = new Map;\n  const length = diff.length;\n  let currentIndex = currentStart;\n  let i = 0;\n  while (i < length) {\n    switch (diff[i++]) {\n      case SKIP:\n        futureStart++;\n        currentIndex++;\n        break;\n      case INSERTION:\n        // TODO: bulk appends for sequential nodes\n        live.set(futureNodes[futureStart], 1);\n        append(\n          get,\n          parentNode,\n          futureNodes,\n          futureStart++,\n          futureStart,\n          currentIndex < currentLength ?\n            get(currentNodes[currentIndex], 0) :\n            before\n        );\n        break;\n      case DELETION:\n        currentIndex++;\n        break;\n    }\n  }\n  i = 0;\n  while (i < length) {\n    switch (diff[i++]) {\n      case SKIP:\n        currentStart++;\n        break;\n      case DELETION:\n        // TODO: bulk removes for sequential nodes\n        if (live.has(currentNodes[currentStart]))\n          currentStart++;\n        else\n          remove(\n            get,\n            parentNode,\n            currentNodes,\n            currentStart++,\n            currentStart\n          );\n        break;\n    }\n  }\n};\n\nconst findK = (ktr, length, j) => {\n  let lo = 1;\n  let hi = length;\n  while (lo < hi) {\n    const mid = ((lo + hi) / 2) >>> 0;\n    if (j < ktr[mid])\n      hi = mid;\n    else\n      lo = mid + 1;\n  }\n  return lo;\n}\n\nexport const smartDiff = (\n  get,\n  parentNode,\n  futureNodes,\n  futureStart,\n  futureEnd,\n  futureChanges,\n  currentNodes,\n  currentStart,\n  currentEnd,\n  currentChanges,\n  currentLength,\n  compare,\n  before\n) => {\n  applyDiff(\n    OND(\n      futureNodes,\n      futureStart,\n      futureChanges,\n      currentNodes,\n      currentStart,\n      currentChanges,\n      compare\n    ) ||\n    HS(\n      futureNodes,\n      futureStart,\n      futureEnd,\n      futureChanges,\n      currentNodes,\n      currentStart,\n      currentEnd,\n      currentChanges\n    ),\n    get,\n    parentNode,\n    futureNodes,\n    futureStart,\n    currentNodes,\n    currentStart,\n    currentLength,\n    before\n  );\n};\n","/*! (c) 2018 Andrea Giammarchi (ISC) */\n\nimport {\n  eqeq, identity, indexOf, isReversed, next,\n  append, remove,\n  smartDiff\n} from './utils.js';\n\nconst domdiff = (\n  parentNode,     // where changes happen\n  currentNodes,   // Array of current items/nodes\n  futureNodes,    // Array of future items/nodes\n  options         // optional object with one of the following properties\n                  //  before: domNode\n                  //  compare(generic, generic) => true if same generic\n                  //  node(generic) => Node\n) => {\n  if (!options)\n    options = {};\n\n  const compare = options.compare || eqeq;\n  const get = options.node || identity;\n  const before = options.before == null ? null : get(options.before, 0);\n\n  const currentLength = currentNodes.length;\n  let currentEnd = currentLength;\n  let currentStart = 0;\n\n  let futureEnd = futureNodes.length;\n  let futureStart = 0;\n\n  // common prefix\n  while (\n    currentStart < currentEnd &&\n    futureStart < futureEnd &&\n    compare(currentNodes[currentStart], futureNodes[futureStart])\n  ) {\n    currentStart++;\n    futureStart++;\n  }\n\n  // common suffix\n  while (\n    currentStart < currentEnd &&\n    futureStart < futureEnd &&\n    compare(currentNodes[currentEnd - 1], futureNodes[futureEnd - 1])\n  ) {\n    currentEnd--;\n    futureEnd--;\n  }\n\n  const currentSame = currentStart === currentEnd;\n  const futureSame = futureStart === futureEnd;\n\n  // same list\n  if (currentSame && futureSame)\n    return futureNodes;\n\n  // only stuff to add\n  if (currentSame && futureStart < futureEnd) {\n    append(\n      get,\n      parentNode,\n      futureNodes,\n      futureStart,\n      futureEnd,\n      next(get, currentNodes, currentStart, currentLength, before)\n    );\n    return futureNodes;\n  }\n\n  // only stuff to remove\n  if (futureSame && currentStart < currentEnd) {\n    remove(\n      get,\n      parentNode,\n      currentNodes,\n      currentStart,\n      currentEnd\n    );\n    return futureNodes;\n  }\n\n  const currentChanges = currentEnd - currentStart;\n  const futureChanges = futureEnd - futureStart;\n  let i = -1;\n\n  // 2 simple indels: the shortest sequence is a subsequence of the longest\n  if (currentChanges < futureChanges) {\n    i = indexOf(\n      futureNodes,\n      futureStart,\n      futureEnd,\n      currentNodes,\n      currentStart,\n      currentEnd,\n      compare\n    );\n    // inner diff\n    if (-1 < i) {\n      append(\n        get,\n        parentNode,\n        futureNodes,\n        futureStart,\n        i,\n        get(currentNodes[currentStart], 0)\n      );\n      append(\n        get,\n        parentNode,\n        futureNodes,\n        i + currentChanges,\n        futureEnd,\n        next(get, currentNodes, currentEnd, currentLength, before)\n      );\n      return futureNodes;\n    }\n  }\n  /* istanbul ignore else */\n  else if (futureChanges < currentChanges) {\n    i = indexOf(\n      currentNodes,\n      currentStart,\n      currentEnd,\n      futureNodes,\n      futureStart,\n      futureEnd,\n      compare\n    );\n    // outer diff\n    if (-1 < i) {\n      remove(\n        get,\n        parentNode,\n        currentNodes,\n        currentStart,\n        i\n      );\n      remove(\n        get,\n        parentNode,\n        currentNodes,\n        i + futureChanges,\n        currentEnd\n      );\n      return futureNodes;\n    }\n  }\n\n  // common case with one replacement for many nodes\n  // or many nodes replaced for a single one\n  /* istanbul ignore else */\n  if ((currentChanges < 2 || futureChanges < 2)) {\n    append(\n      get,\n      parentNode,\n      futureNodes,\n      futureStart,\n      futureEnd,\n      get(currentNodes[currentStart], 0)\n    );\n    remove(\n      get,\n      parentNode,\n      currentNodes,\n      currentStart,\n      currentEnd\n    );\n    return futureNodes;\n  }\n\n  // the half match diff part has been skipped in petit-dom\n  // https://github.com/yelouafi/petit-dom/blob/bd6f5c919b5ae5297be01612c524c40be45f14a7/src/vdom.js#L391-L397\n  // accordingly, I think it's safe to skip in here too\n  // if one day it'll come out like the speediest thing ever to do\n  // then I might add it in here too\n\n  // Extra: before going too fancy, what about reversed lists ?\n  //        This should bail out pretty quickly if that's not the case.\n  if (\n    currentChanges === futureChanges &&\n    isReversed(\n      futureNodes,\n      futureEnd,\n      currentNodes,\n      currentStart,\n      currentEnd,\n      compare\n    )\n  ) {\n    append(\n      get,\n      parentNode,\n      futureNodes,\n      futureStart,\n      futureEnd,\n      next(get, currentNodes, currentEnd, currentLength, before)\n    );\n    return futureNodes;\n  }\n\n  // last resort through a smart diff\n  smartDiff(\n    get,\n    parentNode,\n    futureNodes,\n    futureStart,\n    futureEnd,\n    futureChanges,\n    currentNodes,\n    currentStart,\n    currentEnd,\n    currentChanges,\n    currentLength,\n    compare,\n    before\n  );\n\n  return futureNodes;\n};\n\nexport default domdiff;\n","/*! (c) Andrea Giammarchi - ISC */\nvar importNode = (function (\n  document,\n  appendChild,\n  cloneNode,\n  createTextNode,\n  importNode\n) {\n  var native = importNode in document;\n  // IE 11 has problems with cloning templates:\n  // it \"forgets\" empty childNodes. This feature-detects that.\n  var fragment = document.createDocumentFragment();\n  fragment[appendChild](document[createTextNode]('g'));\n  fragment[appendChild](document[createTextNode](''));\n  var content = native ?\n    document[importNode](fragment, true) :\n    fragment[cloneNode](true);\n  return content.childNodes.length < 2 ?\n    function importNode(node, deep) {\n      var clone = node[cloneNode]();\n      for (var\n        childNodes = node.childNodes || [],\n        length = childNodes.length,\n        i = 0; deep && i < length; i++\n      ) {\n        clone[appendChild](importNode(childNodes[i], deep));\n      }\n      return clone;\n    } :\n    (native ?\n      document[importNode] :\n      function (node, deep) {\n        return node[cloneNode](!!deep);\n      }\n    );\n}(\n  document,\n  'appendChild',\n  'cloneNode',\n  'createTextNode',\n  'importNode'\n));\nexport default importNode;\n","// Custom\nvar UID = '-' + Math.random().toFixed(6) + '%';\n//                           Edge issue!\nif (!(function (template, content, tabindex) {\n  return content in template && (\n    (template.innerHTML = '<p ' + tabindex + '=\"' + UID + '\"></p>'),\n    template[content].childNodes[0].getAttribute(tabindex) == UID\n  );\n}(document.createElement('template'), 'content', 'tabindex'))) {\n  UID = '_dt: ' + UID.slice(1, -1) + ';';\n}\nvar UIDC = '<!--' + UID + '-->';\n\n// DOM\nvar COMMENT_NODE = 8;\nvar DOCUMENT_FRAGMENT_NODE = 11;\nvar ELEMENT_NODE = 1;\nvar TEXT_NODE = 3;\n\nvar SHOULD_USE_TEXT_CONTENT = /^(?:style|textarea)$/i;\nvar VOID_ELEMENTS = /^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;\n\nexport {\n  UID, UIDC,\n  COMMENT_NODE,\n  DOCUMENT_FRAGMENT_NODE,\n  ELEMENT_NODE,\n  TEXT_NODE,\n  SHOULD_USE_TEXT_CONTENT,\n  VOID_ELEMENTS\n};\n","var trim = ''.trim || function () {\n  return String(this).replace(/^\\s+|\\s+/g, '');\n};\nexport default trim;\n","import {UID, UIDC, VOID_ELEMENTS} from './constants.js';\n\nexport default function (template) {\n  return template.join(UIDC)\n          .replace(selfClosing, fullClosing)\n          .replace(attrSeeker, attrReplacer);\n}\n\nvar spaces = ' \\\\f\\\\n\\\\r\\\\t';\nvar almostEverything = '[^ ' + spaces + '\\\\/>\"\\'=]+';\nvar attrName = '[ ' + spaces + ']+' + almostEverything;\nvar tagName = '<([A-Za-z]+[A-Za-z0-9:_-]*)((?:';\nvar attrPartials = '(?:\\\\s*=\\\\s*(?:\\'[^\\']*?\\'|\"[^\"]*?\"|<[^>]*?>|' + almostEverything + '))?)';\n\nvar attrSeeker = new RegExp(tagName + attrName + attrPartials + '+)([ ' + spaces + ']*/?>)', 'g');\nvar selfClosing = new RegExp(tagName + attrName + attrPartials + '*)([ ' + spaces + ']*/>)', 'g');\nvar findAttributes = new RegExp('(' + attrName + '\\\\s*=\\\\s*)([\\'\"]?)' + UIDC + '\\\\2', 'gi');\n\nfunction attrReplacer($0, $1, $2, $3) {\n  return '<' + $1 + $2.replace(findAttributes, replaceAttributes) + $3;\n}\n\nfunction replaceAttributes($0, $1, $2) {\n  return $1 + ($2 || '\"') + UID + ($2 || '\"');\n}\n\nfunction fullClosing($0, $1, $2) {\n  return VOID_ELEMENTS.test($1) ? $0 : ('<' + $1 + $2 + '></' + $1 + '>');\n}\n","import Map from '@ungap/essential-map';\nimport trim from '@ungap/trim';\n\nimport {\n  UID, UIDC,\n  COMMENT_NODE,\n  ELEMENT_NODE,\n  SHOULD_USE_TEXT_CONTENT,\n  TEXT_NODE\n} from './constants.js';\n\nexport {find, parse};\n\nfunction create(type, node, path, name) {\n  return {name: name, node: node, path: path, type: type};\n}\n\nfunction find(node, path) {\n  var length = path.length;\n  var i = 0;\n  while (i < length)\n    node = node.childNodes[path[i++]];\n  return node;\n}\n\nfunction parse(node, holes, parts, path) {\n  var childNodes = node.childNodes;\n  var length = childNodes.length;\n  var i = 0;\n  while (i < length) {\n    var child = childNodes[i];\n    switch (child.nodeType) {\n      case ELEMENT_NODE:\n        var childPath = path.concat(i);\n        parseAttributes(child, holes, parts, childPath);\n        parse(child, holes, parts, childPath);\n        break;\n      case COMMENT_NODE:\n        if (child.textContent === UID) {\n          parts.shift();\n          holes.push(\n            // basicHTML or other non standard engines\n            // might end up having comments in nodes\n            // where they shouldn't, hence this check.\n            SHOULD_USE_TEXT_CONTENT.test(node.nodeName) ?\n              create('text', node, path) :\n              create('any', child, path.concat(i))\n          );\n        }\n        break;\n      case TEXT_NODE:\n        // the following ignore is actually covered by browsers\n        // only basicHTML ends up on previous COMMENT_NODE case\n        // instead of TEXT_NODE because it knows nothing about\n        // special style or textarea behavior\n        /* istanbul ignore if */\n        if (\n          SHOULD_USE_TEXT_CONTENT.test(node.nodeName) &&\n          trim.call(child.textContent) === UIDC\n        ) {\n          parts.shift();\n          holes.push(create('text', node, path));\n        }\n        break;\n    }\n    i++;\n  }\n}\n\nfunction parseAttributes(node, holes, parts, path) {\n  var cache = new Map;\n  var attributes = node.attributes;\n  var remove = [];\n  var array = remove.slice.call(attributes, 0);\n  var length = array.length;\n  var i = 0;\n  while (i < length) {\n    var attribute = array[i++];\n    if (attribute.value === UID) {\n      var name = attribute.name;\n      // the following ignore is covered by IE\n      // and the IE9 double viewBox test\n      /* istanbul ignore else */\n      if (!cache.has(name)) {\n        var realName = parts.shift().replace(/^(?:|[\\S\\s]*?\\s)(\\S+?)\\s*=\\s*['\"]?$/, '$1');\n        var value = attributes[realName] ||\n                      // the following ignore is covered by browsers\n                      // while basicHTML is already case-sensitive\n                      /* istanbul ignore next */\n                      attributes[realName.toLowerCase()];\n        cache.set(name, value);\n        holes.push(create('attr', value, path, realName));\n      }\n      remove.push(attribute);\n    }\n  }\n  length = remove.length;\n  i = 0;\n  while (i < length) {\n    // Edge HTML bug #16878726\n    var attr = remove[i++];\n    if (/^id$/i.test(attr.name))\n      node.removeAttribute(attr.name);\n    // standard browsers would work just fine here\n    else\n      node.removeAttributeNode(attr);\n  }\n\n  // This is a very specific Firefox/Safari issue\n  // but since it should be a not so common pattern,\n  // it's probably worth patching regardless.\n  // Basically, scripts created through strings are death.\n  // You need to create fresh new scripts instead.\n  // TODO: is there any other node that needs such nonsense?\n  var nodeName = node.nodeName;\n  if (/^script$/i.test(nodeName)) {\n    // this used to be like that\n    // var script = createElement(node, nodeName);\n    // then Edge arrived and decided that scripts created\n    // through template documents aren't worth executing\n    // so it became this ... hopefully it won't hurt in the wild\n    var script = document.createElement(nodeName);\n    length = attributes.length;\n    i = 0;\n    while (i < length)\n      script.setAttributeNode(attributes[i++].cloneNode(true));\n    script.textContent = node.textContent;\n    node.parentNode.replaceChild(script, node);\n  }\n}\n","// globals\nimport WeakMap from '@ungap/weakmap';\n\n// utils\nimport createContent from '@ungap/create-content';\nimport importNode from '@ungap/import-node';\nimport trim from '@ungap/trim';\n\n// local\nimport sanitize from './sanitizer.js';\nimport {find, parse} from './walker.js';\n\n// the domtagger ðŸŽ‰\nexport default domtagger;\n\nvar parsed = new WeakMap;\nvar referenced = new WeakMap;\n\nfunction createInfo(options, template) {\n  var markup = sanitize(template);\n  var transform = options.transform;\n  if (transform)\n    markup = transform(markup);\n  var content = createContent(markup, options.type);\n  cleanContent(content);\n  var holes = [];\n  parse(content, holes, template.slice(0), []);\n  var info = {\n    content: content,\n    updates: function (content) {\n      var callbacks = [];\n      var len = holes.length;\n      var i = 0;\n      while (i < len) {\n        var info = holes[i++];\n        var node = find(content, info.path);\n        switch (info.type) {\n          case 'any':\n            callbacks.push(options.any(node, []));\n            break;\n          case 'attr':\n            callbacks.push(options.attribute(node, info.name, info.node));\n            break;\n          case 'text':\n            callbacks.push(options.text(node));\n            node.textContent = '';\n            break;\n        }\n      }\n      return function () {\n        var length = arguments.length;\n        var values = length - 1;\n        var i = 1;\n        if (len !== values) {\n          throw new Error(\n            values + ' values instead of ' + len + '\\n' +\n            template.join(', ')\n          );\n        }\n        while (i < length)\n          callbacks[i - 1](arguments[i++]);\n        return content;\n      };\n    }\n  };\n  parsed.set(template, info);\n  return info;\n}\n\nfunction createDetails(options, template) {\n  var info = parsed.get(template) || createInfo(options, template);\n  var content = importNode.call(document, info.content, true);\n  var details = {\n    content: content,\n    template: template,\n    updates: info.updates(content)\n  };\n  referenced.set(options, details);\n  return details;\n}\n\nfunction domtagger(options) {\n  return function (template) {\n    var details = referenced.get(options);\n    if (details == null || details.template !== template)\n      details = createDetails(options, template);\n    details.updates.apply(null, arguments);\n    return details.content;\n  };\n}\n\nfunction cleanContent(fragment) {\n  var childNodes = fragment.childNodes;\n  var i = childNodes.length;\n  while (i--) {\n    var child = childNodes[i];\n    if (\n      child.nodeType !== 1 &&\n      trim.call(child.textContent).length === 0\n    ) {\n      fragment.removeChild(child);\n    }\n  }\n}\n","/*! (c) Andrea Giammarchi - ISC */\nvar hyperStyle = (function (){'use strict';\n  // from https://github.com/developit/preact/blob/33fc697ac11762a1cb6e71e9847670d047af7ce5/src/varants.js\n  var IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\n  var hyphen = /([^A-Z])([A-Z]+)/g;\n  return function hyperStyle(node, original) {\n    return 'ownerSVGElement' in node ? svg(node, original) : update(node.style, false);\n  };\n  function ized($0, $1, $2) {\n    return $1 + '-' + $2.toLowerCase();\n  }\n  function svg(node, original) {\n    var style;\n    if (original)\n      style = original.cloneNode(true);\n    else {\n      node.setAttribute('style', '--hyper:style;');\n      style = node.getAttributeNode('style');\n    }\n    style.value = '';\n    node.setAttributeNode(style);\n    return update(style, true);\n  }\n  function toStyle(object) {\n    var key, css = [];\n    for (key in object)\n      css.push(key.replace(hyphen, ized), ':', object[key], ';');\n    return css.join('');\n  }\n  function update(style, isSVG) {\n    var oldType, oldValue;\n    return function (newValue) {\n      var info, key, styleValue, value;\n      switch (typeof newValue) {\n        case 'object':\n          if (newValue) {\n            if (oldType === 'object') {\n              if (!isSVG) {\n                if (oldValue !== newValue) {\n                  for (key in oldValue) {\n                    if (!(key in newValue)) {\n                      style[key] = '';\n                    }\n                  }\n                }\n              }\n            } else {\n              if (isSVG)\n                style.value = '';\n              else\n                style.cssText = '';\n            }\n            info = isSVG ? {} : style;\n            for (key in newValue) {\n              value = newValue[key];\n              styleValue = typeof value === 'number' &&\n                                  !IS_NON_DIMENSIONAL.test(key) ?\n                                  (value + 'px') : value;\n              if (!isSVG && /^--/.test(key))\n                info.setProperty(key, styleValue);\n              else\n                info[key] = styleValue;\n            }\n            oldType = 'object';\n            if (isSVG)\n              style.value = toStyle((oldValue = info));\n            else\n              oldValue = newValue;\n            break;\n          }\n        default:\n          if (oldValue != newValue) {\n            oldType = 'string';\n            oldValue = newValue;\n            if (isSVG)\n              style.value = newValue || '';\n            else\n              style.cssText = newValue || '';\n          }\n          break;\n      }\n    };\n  }\n}());\nexport default hyperStyle;\n","import createContent from '@ungap/create-content';\nimport domdiff from 'domdiff';\nimport domtagger from 'domtagger';\nimport hyperStyle from 'hyperhtml-style';\n\nimport {wireType, isArray} from './shared.js';\n\nconst OWNER_SVG_ELEMENT = 'ownerSVGElement';\n\n// returns nodes from wires and components\nconst asNode = (item, i) => item.nodeType === wireType ?\n  (\n    (1 / i) < 0 ?\n      (i ? item.remove(true) : item.lastChild) :\n      (i ? item.valueOf(true) : item.firstChild)\n  ) :\n  item\n;\n\n// returns true if domdiff can handle the value\nconst canDiff = value => 'ELEMENT_NODE' in value;\n\n// generic attributes helpers\nconst hyperAttribute = (node, original) => {\n  let oldValue;\n  let owner = false;\n  const attribute = original.cloneNode(true);\n  return newValue => {\n    if (oldValue !== newValue) {\n      oldValue = newValue;\n      if (attribute.value !== newValue) {\n        if (newValue == null) {\n          if (owner) {\n            owner = false;\n            node.removeAttributeNode(attribute);\n          }\n          attribute.value = newValue;\n        } else {\n          attribute.value = newValue;\n          if (!owner) {\n            owner = true;\n            node.setAttributeNode(attribute);\n          }\n        }\n      }\n    }\n  };\n};\n\n// events attributes helpers\nconst hyperEvent = (node, name) => {\n  let oldValue;\n  let type = name.slice(2);\n  if (name.toLowerCase() in node)\n    type = type.toLowerCase();\n  return newValue => {\n    if (oldValue !== newValue) {\n      if (oldValue)\n        node.removeEventListener(type, oldValue, false);\n      oldValue = newValue;\n      if (newValue)\n        node.addEventListener(type, newValue, false);\n    }\n  };\n};\n\n// special attributes helpers\nconst hyperProperty = (node, name) => {\n  let oldValue;\n  return newValue => {\n    if (oldValue !== newValue) {\n      oldValue = newValue;\n      if (node[name] !== newValue) {\n        node[name] = newValue;\n        if (newValue == null) {\n          node.removeAttribute(name);\n        }\n      }\n    }\n  };\n};\n\n// special hooks helpers\nconst hyperRef = node => {\n  return ref => {\n    ref.current = node;\n  };\n};\n\n// list of attributes that should not be directly assigned\nconst readOnly = /^(?:form|list)$/i;\n\n// reused every slice time\nconst slice = [].slice;\n\n// simplifies text node creation\nconst text = (node, text) => node.ownerDocument.createTextNode(text);\n\nexport default function Tagger(type) {\n  this.type = type;\n  return domtagger(this);\n}\n\nTagger.prototype = {\n\n  // there are four kind of attributes, and related behavior:\n  //  * events, with a name starting with `on`, to add/remove event listeners\n  //  * special, with a name present in their inherited prototype, accessed directly\n  //  * regular, accessed through get/setAttribute standard DOM methods\n  //  * style, the only regular attribute that also accepts an object as value\n  //    so that you can style=${{width: 120}}. In this case, the behavior has been\n  //    fully inspired by Preact library and its simplicity.\n  attribute(node, name, original) {\n    switch (name) {\n      case 'class':\n        if (OWNER_SVG_ELEMENT in node)\n          return hyperAttribute(node, original);\n        name = 'className';\n      case 'data':\n      case 'props':\n        return hyperProperty(node, name);\n      case 'style':\n        return hyperStyle(node, original, OWNER_SVG_ELEMENT in node);\n      case 'ref':\n        return hyperRef(node);\n      default:\n        if (name.slice(0, 2) === 'on')\n          return hyperEvent(node, name);\n        if (name in node && !(\n          OWNER_SVG_ELEMENT in node || readOnly.test(name)\n        ))\n          return hyperProperty(node, name);\n        return hyperAttribute(node, original);\n\n    }\n  },\n\n  // in a hyper(node)`<div>${content}</div>` case\n  // everything could happen:\n  //  * it's a JS primitive, stored as text\n  //  * it's null or undefined, the node should be cleaned\n  //  * it's a promise, update the content once resolved\n  //  * it's an explicit intent, perform the desired operation\n  //  * it's an Array, resolve all values if Promises and/or\n  //    update the node with the resulting list of content\n  any(node, childNodes) {\n    const diffOptions = {node: asNode, before: node};\n    const nodeType = OWNER_SVG_ELEMENT in node ? /* istanbul ignore next */ 'svg' : 'html';\n    let fastPath = false;\n    let oldValue;\n    const anyContent = value => {\n      switch (typeof value) {\n        case 'string':\n        case 'number':\n        case 'boolean':\n          if (fastPath) {\n            if (oldValue !== value) {\n              oldValue = value;\n              childNodes[0].textContent = value;\n            }\n          } else {\n            fastPath = true;\n            oldValue = value;\n            childNodes = domdiff(\n              node.parentNode,\n              childNodes,\n              [text(node, value)],\n              diffOptions\n            );\n          }\n          break;\n        case 'function':\n          anyContent(value(node));\n          break;\n        case 'object':\n        case 'undefined':\n          if (value == null) {\n            fastPath = false;\n            childNodes = domdiff(\n              node.parentNode,\n              childNodes,\n              [],\n              diffOptions\n            );\n            break;\n          }\n        default:\n          fastPath = false;\n          oldValue = value;\n          if (isArray(value)) {\n            if (value.length === 0) {\n              if (childNodes.length) {\n                childNodes = domdiff(\n                  node.parentNode,\n                  childNodes,\n                  [],\n                  diffOptions\n                );\n              }\n            } else {\n              switch (typeof value[0]) {\n                case 'string':\n                case 'number':\n                case 'boolean':\n                  anyContent(String(value));\n                  break;\n                case 'function':\n                  anyContent(value.map(invoke, node));\n                  break;\n                case 'object':\n                  if (isArray(value[0])) {\n                    value = value.concat.apply([], value);\n                  }\n                default:\n                  childNodes = domdiff(\n                    node.parentNode,\n                    childNodes,\n                    value,\n                    diffOptions\n                  );\n                  break;\n              }\n            }\n          } else if (canDiff(value)) {\n            childNodes = domdiff(\n              node.parentNode,\n              childNodes,\n              value.nodeType === 11 ?\n                slice.call(value.childNodes) :\n                [value],\n              diffOptions\n            );\n          } else if ('text' in value) {\n            anyContent(String(value.text));\n          } else if ('any' in value) {\n            anyContent(value.any);\n          } else if ('html' in value) {\n            childNodes = domdiff(\n              node.parentNode,\n              childNodes,\n              slice.call(\n                createContent(\n                  [].concat(value.html).join(''),\n                  nodeType\n                ).childNodes\n              ),\n              diffOptions\n            );\n          } else if ('length' in value) {\n            anyContent(slice.call(value));\n          }\n          break;\n      }\n    };\n    return anyContent;\n  },\n\n  // style or textareas don't accept HTML as content\n  // it's pointless to transform or analyze anything\n  // different from text there but it's worth checking\n  // for possible defined intents.\n  text(node) {\n    let oldValue;\n    const textContent = value => {\n      if (oldValue !== value) {\n        oldValue = value;\n        const type = typeof value;\n        if (type === 'object' && value) {\n          if ('text' in value) {\n            textContent(String(value.text));\n          } else if ('any' in value) {\n            textContent(value.any);\n          } else if ('html' in value) {\n            textContent([].concat(value.html).join(''));\n          } else if ('length' in value) {\n            textContent(slice.call(value).join(''));\n          }\n        } else if (type === 'function') {\n          textContent(value(node));\n        } else {\n          node.textContent = value == null ? '' : value;\n        }\n      }\n    };\n    return textContent;\n  }\n};\n\nfunction invoke(callback) {\n  return callback(this);\n}\n","import WeakMap from '@ungap/weakmap';\nimport tta from '@ungap/template-tag-arguments';\nimport {Wire, wireType, isArray} from './shared.js';\nimport Tagger from './tagger.js';\n\nconst wm = new WeakMap;\nconst container = new WeakMap;\n\nlet current = null;\n\n// can be used with any useRef hook\n// returns an `html` and `svg` function\nexport const hook = useRef => ({\n  html: createHook(useRef, html),\n  svg: createHook(useRef, svg)\n});\n\n// generic content render\nexport function render(node, callback) {\n  const value = update.call(this, node, callback);\n  if (container.get(node) !== value) {\n    container.set(node, value);\n    appendClean(node, value);\n  }\n  return node;\n}\n\n// keyed render via render(node, () => html`...`)\n// non keyed renders in the wild via html`...`\nexport const html = outer('html');\nexport const svg = outer('svg');\n\n// - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\nfunction appendClean(node, fragment) {\n  node.textContent = '';\n  node.appendChild(fragment);\n}\n\nfunction asNode(result, forceFragment) {\n  return result.nodeType === wireType ?\n    result.valueOf(forceFragment) :\n    result;\n}\n\nfunction createHook(useRef, view) {\n  return function () {\n    const ref = useRef(null);\n    if (ref.current === null)\n      ref.current = view.for(ref);\n    return asNode(ref.current.apply(null, arguments), false);\n  };\n}\n\nfunction outer(type) {\n  const wm = new WeakMap;\n  tag.for = (identity, id) => {\n    const ref = wm.get(identity) || set(identity);\n    if (id == null)\n      id = '$';\n    return ref[id] || create(ref, id);\n  };\n  return tag;\n  function create(ref, id) {\n    let wire = null;\n    const $ = new Tagger(type);\n    return (ref[id] = function () {\n      const result = $.apply(null, tta.apply(null, arguments));\n      return wire || (wire = wiredContent(result));\n    });\n  }\n  function set(identity) {\n    const ref = {'$': null};\n    wm.set(identity, ref);\n    return ref;\n  }\n  function tag() {\n    const args = tta.apply(null, arguments);\n    return current ?\n      new Hole(type, args) :\n      new Tagger(type).apply(null, args);\n  }\n}\n\nfunction set(node) {\n  const info = {\n    i: 0, length: 0,\n    stack: [],\n    update: false\n  };\n  wm.set(node, info);\n  return info;\n}\n\nfunction update(reference, callback) {\n  const prev = current;\n  current = wm.get(reference) || set(reference);\n  current.i = 0;\n  const ret = callback.call(this);\n  let value;\n  if (ret instanceof Hole) {\n    value = asNode(unroll(ret, 0), current.update);\n    const {i, length, stack, update} = current;\n    if (i < length)\n      stack.splice(current.length = i);\n    if (update)\n      current.update = false;\n  } else {\n    value = asNode(ret, false);\n  }\n  current = prev;\n  return value;\n}\n\nfunction unroll(hole, level) {\n  const {i, length, stack} = current;\n  const {type, args} = hole;\n  const stacked = i < length;\n  current.i++;\n  if (!stacked)\n    current.length = stack.push({\n      l: level,\n      kind: type,\n      tag: null,\n      tpl: args[0],\n      wire: null\n    });\n  unrollArray(args, 1, level + 1);\n  const info = stack[i];\n  if (stacked) {\n    const {l:control, kind, tag, tpl, wire} = info;\n    if (control === level && type === kind && tpl === args[0]) {\n      tag.apply(null, args);\n      return wire;\n    }\n  }\n  const tag = new Tagger(type);\n  const wire = wiredContent(tag.apply(null, args));\n  info.l = level;\n  info.kind = type;\n  info.tag = tag;\n  info.tpl = args[0];\n  info.wire = wire;\n  if (i < 1)\n    current.update = true;\n  return wire;\n}\n\nfunction unrollArray(arr, i, level) {\n  for (const {length} = arr; i < length; i++) {\n    const value = arr[i];\n    if (typeof value === 'object' && value) {\n      if (value instanceof Hole) {\n        arr[i] = unroll(value, level - 1);\n      } else if (isArray(value)) {\n        arr[i] = unrollArray(value, 0, level++);\n      }\n    }\n  }\n  return arr;\n}\n\nfunction wiredContent(node) {\n  const childNodes = node.childNodes;\n  const {length} = childNodes;\n  return length === 1 ?\n    childNodes[0] :\n    (length ? new Wire(childNodes) : node);\n}\n\nfunction Hole(type, args) {\n  this.type = type;\n  this.args = args;\n}\n","import augmentor, {\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useReducer,\n  useRef,\n  useState\n} from 'dom-augmentor';\n\nimport {render, hook} from 'lighterhtml';\nconst {html, svg} = hook(useRef);\n\nexport default fn => augmentor(function () {\n  const {current: info} = useRef({i: 0, $: []});\n  const {i, $} = info;\n  useEffect(() => {\n    const {i, $} = info;\n    if (i > $.length)\n      $.splice(i);\n    info.i = 0;\n  });\n  info.i++;\n  if (i === $.length)\n    $.push(augmentor(fn));\n  return $[i].apply(this, arguments);\n});\n\nexport {\n  render, html, svg,\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useReducer,\n  useRef,\n  useState\n};\n","import hookable, {render, html, useState, useEffect} from 'neverland/esm';\n\nconst App = hookable(function() {\n  const PLAYABLE_FORMATS = new Set([\"h.264\", \"MPEG4\", \"Ogg Video\", \"WebM\"]);\n\n  /* -------------    State   ------------- */\n  const [identifier, setIdentifier] = useState(\"\");\n\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [metadataPairs, setMetadataPairs] = useState([]);\n  const [relatedData, setRelatedData] = useState([]);\n\n  const [errorMsg, setErrorMsg] = useState(\"\");\n\n  /* ------------- Components ------------- */\n\n  const VideoDetails = hookable(() => html`\n    <div class=\"details\">\n      <div>\n        <h1>${title}</h1>\n        <p>${description}</p>\n      </div>\n        ${\n          // TODO: Make look good\n          false ? html`\n            <div>\n              <table>\n                <thead>\n                  <tr>\n                    <th>Key</th>\n                    <th>Value</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  ${metadataPairs.map(([key, value]) => html`\n                    <tr>\n                      <td>${key}</td>\n                      <td>${value}</td>\n                    </tr>\n                  `)}\n                </tbody>\n              </table>\n            </div>\n          ` : null\n        }\n    </div>\n  `);\n\n  const Lookup = hookable(function(){\n    return html`\n      <div class=\"lookup\">\n        <form onsubmit=${function(event) {\n          event.preventDefault();\n          const value = this.identifier.value;\n          if (value !== '') {\n            fetchData(value);\n          }\n        }}>\n          I want to see\n          <code onclick=\"this.children.identifier.focus()\">\n            archive.org/details/\n            <input name=\"identifier\" type=\"text\" placeholder=${identifier} />\n          </code>\n          <button type=\"submit\">please.</button>\n        </form>\n      </div>\n    `\n  });\n\n  const VideoPlayer = hookable(() => {\n    const RelatedVideos = hookable(() => {\n      const tiles = relatedData.map(({id, title, description}) => html`\n        <li\n          class=\"related-video\"\n          title=${description}\n          onclick=${(event) => {\n            event.preventDefault();\n            fetchData(id);\n          }}\n        >\n          <img src=${`https://archive.org/services/img/${id}`} height=50 width=75 />\n          <span>${title}</span>\n        </li>\n      `)\n\n      return html`\n        <ul class=\"related-videos\">\n          <h4>Related Videos</h4>\n          ${tiles}\n        </ul>\n      `\n    })\n\n    const ErrorMessage = hookable(() => html`<div style=${{\n      display: errorMsg === '' ? \"none\" : \"block\",\n      position: \"absolute\",\n      width: 640,\n      height: 200,\n      marginTop: 135,\n      backgroundColor: '#BBB'\n    }} class=\"error-message\">\n      <div>${errorMsg}</div>\n      <a onclick=${(event) => {\n        event.preventDefault();\n        setErrorMsg(\"\");\n      }}>close</a>\n    </div>\n    `);\n\n    return html`\n      <div class=\"video-player\">\n        <div>\n          <iframe\n            src=${`https://archive.org/embed/${identifier}`}\n            width=\"640\"\n            height=\"480\"\n            frameborder=\"0\"\n            webkitallowfullscreen=\"true\"\n            mozallowfullscreen=\"true\"\n            playlist=\"1\"\n            allowfullscreen></iframe>\n        </div>\n        ${ErrorMessage()}\n        ${RelatedVideos()}\n      </div>\n    `\n  })\n\n  /* -------------  Callbacks ------------- */\n  // function parseVideoLinks(items, identifier) {\n  //   items.filter(item => PLAYABLE_FORMATS.has(item.format))\n  //     .map(({name}) => new RegExp(`${identifier}\\.\\w+$`). )\n  // }\n\n  async function fetchMetadata(destination) {\n    try {\n      const resp = await fetch(`https://archive.org/metadata/${destination}`);\n      const json = await resp.json();\n      const {\n        metadata: {\n          mediatype,\n          title,\n          description,\n          identifier,\n          ...metaRest\n        },\n        reviews,\n        files\n      } = json;\n      if (mediatype !== \"movies\") { throw \"Not a video\" }\n      // parseVideoLinks(files, identifier);\n      setTitle(title);\n      setDescription(description);\n      // setMetadataPairs(Object.entries(metaRest));\n      setMetadataPairs([]);\n    } catch (error) {\n      setErrorMsg(`Oops. Apollonius couldn't find that video. Do you have the right identifier?`)\n    }\n  };\n\n  async function fetchRelated(destination) {\n    try {\n      const resp = await fetch(`https://be-api.us.archive.org/mds/v1/get_related/all/${destination}`);\n      const json = await resp.json();\n      const {hits: {hits: items}} = json;\n      const relVids = items\n        .filter(({_source: {mediatype: [mediatype]}}) => mediatype === \"movies\")\n        .map(({_id: id, _source: {title: [title], description: [description]}}) =>\n          ({id, title, description})\n        );\n      setRelatedData(relVids);\n    } catch (error) {\n      console.log(error);\n      setRelatedData([])\n    }\n  };\n\n  async function fetchData(destination) {\n    await Promise.all([fetchMetadata, fetchRelated].map(call => call(destination)));\n    setIdentifier(destination);\n    window.history.pushState({}, \"\", `?find=${destination}`);\n    setErrorMsg('');\n  }\n\n  useEffect(() => {\n    const findParam = new URLSearchParams(window.location.search).get(\"find\");\n    const startingPoint = findParam || \"InformationM\";\n    if (!findParam) {\n      window.history.replaceState({}, \"\", `?find=${startingPoint}`)\n    }\n\n    setIdentifier(startingPoint)\n    fetchData(startingPoint)\n  }, [])\n\n\n  return html`\n    <div class=\"app\">\n      ${Lookup()}\n      ${VideoPlayer()}\n      ${VideoDetails()}\n    </div>\n  `;\n\n});\n\nrender(document.body, App);\n"],"names":["self","CustomEvent","__p__","constructor","type","init","e","document","createEvent","initCustomEvent","bubbles","cancelable","detail","WeakSet","WeakMap","all","proto","prototype","iterable","set","this","forEach","add","value","get","delete","has","now","empty","setup","$","args","apply","stacked","id","runner","state","i","stack","before","push","uid","unstacked","[object Object]","update","unknown","length","fn","current","each","reset","key","test","splice","prev","_","after","external","result","c","a","arguments","arr","diverse","cancel","request","cancelAnimationFrame","requestAnimationFrame","o_O","clearTimeout","setTimeout","create","always","check","inputs","raf","cb","info","clean","t","effect","refs","comp","b","some","diff","drop","useEffect","reducer","action","useReducer","observe","poly","CONNECTED","DISCONNECTED","Event","notObserving","observer","node","dispatched","MutationObserver","changes","subtree","childList","timer","records","reschedule","record","addEventListener","event","addedNodes","removedNodes","target","Tracker","dispatchAll","nodes","counter","nodeType","dispatchTarget","dispatchEvent","children","startObserving","ownerDocument","disconnected","element","childNodes","child","find","handler","handleEvent","onconnected","ondisconnected","valueOf","call","Object","dP","defineProperty","hOP","hasOwnProperty","configurable","pair","Math","random","templateLiteral","isNoOp","tl","propertyIsEnumerable","isFrozen","defaultView","navigator","userAgent","parseFloat","RegExp","$1","forever","TL","template","unique","Wire","slice","ELEMENT_NODE","remove","keepFirst","first","firstChild","last","lastChild","parentNode","removeChild","range","createRange","setStartBefore","setEndAfter","deleteContents","forceAppend","fragment","noFragment","createDocumentFragment","n","l","appendChild","isArray","Array","wireType","createContent","FRAGMENT","createHTML","html","innerHTML","content","selector","querySelectorAll","append","markup","svg","root","createElementNS","Map","k","v","had","contains","indexOf","parent","start","end","insertBefore","eqeq","identity","O","moreNodes","moreStart","moreEnd","lessNodes","lessStart","lessEnd","compare","m","next","list","nextSibling","findK","ktr","j","lo","hi","mid","smartDiff","futureNodes","futureStart","futureEnd","futureChanges","currentNodes","currentStart","currentEnd","currentChanges","currentLength","live","currentIndex","applyDiff","rows","cols","d","r","pv","cv","pd","outer","diffIdx","OND","minLen","link","tresh","keymap","idxInOld","newi","oldi","ptr","HS","domdiff","options","currentSame","futureSame","isReversed","importNode","cloneNode","createTextNode","native","deep","clone","trim","String","replace","UID","toFixed","createElement","getAttribute","UIDC","COMMENT_NODE","TEXT_NODE","SHOULD_USE_TEXT_CONTENT","VOID_ELEMENTS","spaces","attrName","tagName","attrPartials","attrSeeker","selfClosing","findAttributes","attrReplacer","$0","$2","$3","replaceAttributes","fullClosing","path","name","parseAttributes","holes","parts","cache","attributes","array","attribute","realName","shift","toLowerCase","attr","removeAttribute","removeAttributeNode","nodeName","script","setAttributeNode","textContent","replaceChild","parsed","referenced","createInfo","join","sanitize","transform","cleanContent","parse","childPath","concat","updates","callbacks","len","any","text","values","Error","domtagger","details","createDetails","hyperStyle","IS_NON_DIMENSIONAL","hyphen","original","style","setAttribute","getAttributeNode","ized","isSVG","oldType","oldValue","newValue","styleValue","cssText","setProperty","object","css","toStyle","asNode","item","hyperAttribute","owner","hyperProperty","readOnly","Tagger","invoke","callback","ref","hyperRef","removeEventListener","hyperEvent","diffOptions","fastPath","anyContent","map","canDiff","wm","container","forceFragment","createHook","useRef","view","for","tag","wire","tta","wiredContent","Hole","unroll","hole","level","kind","tpl","unrollArray","control","hook","augmentor","App","hookable","identifier","setIdentifier","useState","title","setTitle","description","setDescription","metadataPairs","setMetadataPairs","relatedData","setRelatedData","errorMsg","setErrorMsg","VideoDetails","Lookup","preventDefault","fetchData","VideoPlayer","RelatedVideos","tiles","ErrorMessage","display","position","width","height","marginTop","backgroundColor","async","fetchMetadata","destination","resp","fetch","json","metadata","mediatype","metaRest","reviews","files","error","fetchRelated","hits","items","relVids","filter","_source","_id","console","log","Promise","window","history","pushState","findParam","URLSearchParams","location","search","startingPoint","replaceState","reference","ret","appendClean","render","body"],"mappings":"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"}